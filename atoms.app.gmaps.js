/* atoms v0.03.26 - 2014/3/26
   http://atomic.tapquo.com
   Copyright (c) 2014 Tapquo S.L. - Licensed  */
(function(){"use strict";var __dependency,__markerIcon,_ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__slice=[].slice;Atoms.Atom.GMap=function(_super){function GMap(){return this.__instance=__bind(this.__instance,this),_ref=GMap.__super__.constructor.apply(this,arguments)}return __extends(GMap,_super),GMap.template='<div {{#if.style}}class="{{style}}"{{/if.style}}></div>',GMap.base="GMap",GMap.prototype.markers=[],GMap.prototype.output=function(){var exists;return GMap.__super__.output.apply(this,arguments),exists=Atoms.$("[data-extension=gmap]").length>0,exists?this.__instance():__dependency(this.__instance)},GMap.prototype.center=function(position,zoom_level){return null==zoom_level&&(zoom_level=8),this.instance.setCenter(new google.maps.LatLng(position.latitude,position.longitude)),this.zoom(zoom_level)},GMap.prototype.zoom=function(level){return this.instance.setZoom(level)},GMap.prototype.addMarker=function(position,icon,animate){var marker;return null==animate&&(animate=!1),marker=new google.maps.Marker({map:this.instance,icon:__markerIcon(icon),position:new google.maps.LatLng(position.latitude,position.longitude)}),animate&&marker.setAnimation(google.maps.Animation.BOUNCE),this.markers.push(marker)},GMap.prototype.clean=function(){var marker,_i,_len,_ref1;for(_ref1=this.markers,_i=0,_len=_ref1.length;_len>_i;_i++)marker=_ref1[_i],marker.setMap=null;return this.markers=[]},GMap.prototype.__instance=function(){var _this=this;return setTimeout(function(){var options;return options={center:new google.maps.LatLng(43.256963,-2.923441),zoom:1,mobile:!0,sensor:!1,disableDefaultUI:!0},_this.instance=new google.maps.Map(_this.el[0],options)},1e3)},GMap}(Atoms.Class.Atom),__dependency=function(callback){var script;return window.google={maps:{}},script=document.createElement("script"),script.type="text/javascript",script.src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&callback=console.log",script.setAttribute("data-extension","gmap"),script.onload=function(){return null!=callback?callback.call(this):void 0},document.body.appendChild(script)},__markerIcon=function(icon){return icon?new google.maps.MarkerImage(icon.url,new google.maps.Size(icon.size.x,icon.size.y),new google.maps.Point(0,0),new google.maps.Point(icon.anchor.x,icon.anchor.y)):null},__dependency(),Atoms.Organism.GMapFullScreen=function(_super){function GMapFullScreen(){this["default"]={children:[{"Atom.GMap":{id:"gmap"}},{"Atom.Button":{icon:"navicon",style:"small"}},{"Molecule.Form":{events:["submit"],children:[{"Atom.Input":{name:"adress",placeholder:"Type a address",required:!0}},{"Atom.Button":{icon:"search",text:"Search",style:"fluid accept"}}]}}]},GMapFullScreen.__super__.constructor.apply(this,arguments)}return __extends(GMapFullScreen,_super),GMapFullScreen.template='<section {{#if.id}}id="{{id}}"{{/if.id}}></section>',GMapFullScreen.available=["Atom.Input","Atom.Button","Atom.GMap","Molecule.Form"],GMapFullScreen.prototype.onFormSubmit=function(){var event,form,hierarchy,position;return event=arguments[0],form=arguments[1],hierarchy=3<=arguments.length?__slice.call(arguments,2):[],event.preventDefault(),position={latitude:43.256963,longitude:-2.923441},this.gmap.addMarker(position),this.gmap.center(position),this.gmap.zoom(16)},GMapFullScreen.prototype.onButtonTouch=function(){return!1},GMapFullScreen}(Atoms.Organism.Section)}).call(this);